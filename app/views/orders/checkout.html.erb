<section id="confirmation-page">
    <div class="container">
        <div class="row" id="rental-details">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body" id="checkout-snapshot">
                        <div class="row">
                            <div class="col-md-5">
                                <img src="<%= @item.image.first_source %>" alt="<%= @item.item_name %>"
                                    height="120">
                            </div>
                            
                            <div class="col-md-7">
                                <h5 style="color: var(--main-font-color-dark);">
                                    <%= @item.item_name %>
                                </h5>
                                
                                <p style="margin-bottom: 0;">
                                    Size: <%= @item.size %>
                                </p>
                                
                                <p>
                                    Owner: <%= @item.lister.username %>
                                </p>
                            </div>
                        </div>
                        
                        <hr>
                        
                        <div class="row">
                            <div class="col-md-12">
                                <span class="float-left" id="display-checkin" style="width: 45%; font-size: 14px;">
                                    <%= @order.rental_start.present? ? @order.rental_start : DateTime.current().strftime("%m/%d/%Y") %>
                                </span>
                                
                                <span class="float-center" style="width: 10%; text-align: center; font-size: 14px;">
                                    <i class="fas fa-arrows-alt-h"></i>
                                </span>
                                
                                <span class="float-right" id="display-checkout" style="width: 45%; text-align: right; font-size: 14px;">
                                    <%= @order.rental_end.present? ? @order.rental_end : (DateTime.current() + 3).strftime("%m/%d/%Y") %>
                                </span>
                            </div>
                        </div>
                        
                        <hr>
                        
                        <div id="checkout-snapshot-details">
                            <div class="row">
                                <div class="col-md-12">
                                    <div>
                                        <p class="float-left" style="margin-bottom: 0;">Price</p>
                                        
                                        <p class="float-right" style="text-align: right !important; margin-bottom: 0;">
                                            <%= number_to_currency @order.calculated_price %>
                                            <br>
                                            <span style="font-size: 12px !important;" class="text-muted">
                                                <span id="days">(<%= pluralize @order.days_requested, "day" %>)</span>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                                    
                            <div class="row">
                                <div class="col-md-12">
                                    <div>
                                        <p class="float-left" style="margin-bottom: 0;">Service fee</p>
                                        
                                        <p class="float-right" style="margin-bottom: 0;">
                                            <%= number_to_currency @order.calculated_service_fee %>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-12">
                                    <div>
                                        <p class="float-left" style="margin-bottom:0;">Tax</p>
                                        
                                        <p class="float-right" style="margin-bottom:0;">
                                            <%= number_to_currency @order.calculated_tax %>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <hr>
                            
                            <div class="row">
                                <div class="col-md-12">
                                    <div style="color: var(--main-font-color-dark); font-weight: 600;">
                                        <p class="float-left">Total</p>
                                        
                                        <p class="float-right">
                                            <%= number_to_currency @order.total %>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-5">
                                <h5 style="color: var(--main-font-color-dark);">
                                    Secure Checkout
                                </h5>
                            </div>
                            
                            <div class="col-md-7" style="padding-top: 8px;">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                                        role="progressbar" style="width: 25%;"
                                        aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">Rental Details</div>
                                </div>
                            </div>
                        </div>
                        
                        <hr>
                        
                        <div class="row">
                            <div class="col-md-12" style="margin-bottom: 20px;">
                                <h6 style="color: var(--main-font-color-dark);">Select rental period</h6>
                            </div>
                            
                            <div class="col-md-12">
                                <%= render partial: "common/datetime_picker", locals: { item: @item } %>
                            </div>
                        </div>
                        
                        <hr>
                        
                        <div class="row">
                            <div class="col-md-12" style="margin-bottom: 20px;">
                                <h6 style="color: var(--main-font-color-dark);">Select pick-up location</h6>
                            </div>
                            
                            <div class="col-md-12">
                                <%= render partial: "common/location_picker", locals: {  } %>
                            </div>
                        </div>
                        
                        <hr>
                        
                        <div class="row">
                            <div class="col-md-12">
                                <a class="float-left btn btn-outline-primary" style="text-decoration: none;"
                                    href="/inventory_items/<%= @item.id %>">
                                    <i class="fas fa-angle-left"></i> Back
                                </a>
                                
                                <a class="float-right btn btn-primary" onclick="goToPayment()">
                                    Continue <i class="fas fa-angle-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row" id="payment-details">
            
        </div>
    </div>
</section>

<script type="text/javascript">
    goToPayment = () => {
        btn.click();
    }
</script>